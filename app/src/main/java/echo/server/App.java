/*
 * This Java source file was generated by the Gradle 'init' task.
 */

package echo.server;

import java.io.IOException;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.Scanner;

public class App {

  public static void main(String[] args) throws IOException {
    Console.print("Welcome to the Echo Server!");
    Console.print("Starting Server...");
    ServerSocket serverSocket = EchoServer.startServerSocket(9806);
    Console.print("Echo Server started and waiting for clients... ");
    Socket client = EchoClient.createSocket(9806);
    Socket clientSocket = EchoServer.acceptClientSocket(serverSocket);
    Console.print("Connection established!");
    String message = Console.inputString("Enter message to echo please: ");
    EchoClient.sendClientMessageToServer(client, message);
    Scanner scanner = SocketIO.createSocketReader(clientSocket);
    SocketIO.readFromInputStream(scanner);
  }
}
